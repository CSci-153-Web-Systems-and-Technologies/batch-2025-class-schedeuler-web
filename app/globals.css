/* app/globals.css */
@import "tailwindcss";

/* 1. Define custom variant for class-based dark mode */
@custom-variant dark (&:where(.dark, .dark *));

:root {
  /* --- Your Custom App Colors --- */
  --color-primary: #4169e1;
  --color-primary-rgb: 65, 105, 225;
  --color-header-bg: #f9fafb;
  --color-primary-bg: #E2E8F0;
  --color-gradient: #6a5acd;
  --color-text-desc: #848484;
  --color-text-header: #0f172a;
  --color-text-heading: #000000;
  --color-outline-btn: #c1c1c1;

  /* --- Shadcn Light Variables --- */
  --background: 0 0% 100%;
  --foreground: 222.2 84% 4.9%;
  --card: 0 0% 100%;
  --card-foreground: 222.2 84% 4.9%;
  --popover: 0 0% 100%;
  --popover-foreground: 222.2 84% 4.9%;
  --primary: 222.2 47.4% 11.2%;
  --primary-foreground: 210 40% 98%;
  --secondary: 210 40% 96.1%;
  --secondary-foreground: 222.2 47.4% 11.2%;
  --muted: 210 40% 96.1%;
  --muted-foreground: 215.4 16.3% 46.9%;
  --accent: 210 40% 96.1%;
  --accent-foreground: 222.2 47.4% 11.2%;
  --destructive: 0 84.2% 60.2%;
  --destructive-foreground: 210 40% 98%;
  --border: 214.3 31.8% 91.4%;
  --input: 214.3 31.8% 91.4%;
  --ring: 222.2 84% 4.9%;
  --radius: 0.5rem;
}

/* --- Shadcn Dark Variables (Restored) --- */
.dark {
  --background: 222.2 84% 4.9%;
  --foreground: 210 40% 98%;
  --card: 222.2 84% 4.9%;
  --card-foreground: 210 40% 98%;
  --popover: 222.2 84% 4.9%;
  --popover-foreground: 210 40% 98%;
  --primary: 210 40% 98%;
  --primary-foreground: 222.2 47.4% 11.2%;
  --secondary: 217.2 32.6% 17.5%;
  --secondary-foreground: 210 40% 98%;
  --muted: 217.2 32.6% 17.5%;
  --muted-foreground: 215 20.2% 65.1%;
  --accent: 217.2 32.6% 17.5%;
  --accent-foreground: 210 40% 98%;
  --destructive: 0 62.8% 30.6%;
  --destructive-foreground: 210 40% 98%;
  --border: 217.2 32.6% 17.5%;
  --input: 217.2 32.6% 17.5%;
  --ring: 212.7 26.8% 83.9%;
}

/* --- Authenticated Layout Specifics --- */
.authenticated {
  --color-primary: #4169e1;
  --color-bar-bg: #ffffff;
  --color-main-bg: #E2E8F0;
  --color-components-bg: #F9FAFB;
  --color-text-primary: #000000;
  --color-text-secondary: #717171;
  --color-border: #E5E7EB;
  --color-hover: #f1f5f9; 
  --color-muted: #94a3b8;
  --color-muted-fg: rgb(59, 59, 59);
  --color-breadcrumb-text: #374151;
  --color-breadcrumb-text-hover: #000000;
  --color-breadcrumb-current: #000000;
  --color-breadcrumb-separator: #4b5563;
}

.authenticated.dark {
  --color-primary: #4169e1;
  --color-bar-bg: #171D24;
  --color-main-bg: #212A35;
  --color-components-bg: #16182C;
  --color-text-primary: #ffffff;
  --color-text-secondary: #bfc6ba;
  --color-border: #374151;
  --color-hover: #2d3748; 
  --color-muted: #475569; 
  --color-muted-fg: #c1c1c1;
  --color-breadcrumb-text: #e5e7eb;
  --color-breadcrumb-text-hover: #ffffff;
  --color-breadcrumb-current: #ffffff;
  --color-breadcrumb-separator: #d1d5db;
}

@theme {
  --color-background: hsl(var(--background));
  --color-foreground: hsl(var(--foreground));
  --color-primary: hsl(var(--primary));
  --color-primary-foreground: hsl(var(--primary-foreground));
  --color-secondary: hsl(var(--secondary));
  --color-secondary-foreground: hsl(var(--secondary-foreground));
  --color-muted: hsl(var(--muted));
  --color-muted-foreground: hsl(var(--muted-foreground));
  --color-accent: hsl(var(--accent));
  --color-accent-foreground: hsl(var(--accent-foreground));
  --color-destructive: hsl(var(--destructive));
  --color-destructive-foreground: hsl(var(--destructive-foreground));
  --color-border: hsl(var(--border));
  --color-input: hsl(var(--input));
  --color-ring: hsl(var(--ring));
  --color-card: hsl(var(--card));
  --color-card-foreground: hsl(var(--card-foreground));
  --color-popover: hsl(var(--popover));
  --color-popover-foreground: hsl(var(--popover-foreground));

  --color-custom-primary: var(--color-primary);
  --color-custom-primary-bg: var(--color-primary-bg);
  --color-custom-gradient: var(--color-gradient);
  --color-custom-text-desc: var(--color-text-desc);
  --color-custom-text-header: var(--color-text-header);
  --color-custom-text-heading: var(--color-text-heading);
  --color-custom-outline-btn: var(--color-outline-btn);

  --radius-lg: var(--radius);
  --radius-md: calc(var(--radius) - 2px);
  --radius-sm: calc(var(--radius) - 4px);
}

@layer utilities {
  .text-gradient {
    @apply bg-clip-text text-transparent;
    background-image: linear-gradient(
      var(--gradient-angle, 90deg),
      hsl(var(--primary)) var(--gradient-start, 22%),
      hsl(var(--secondary)) var(--gradient-end, 100%)
    );
  }
}

@layer utilities {
  .bg-landing {
    background: linear-gradient(-180deg, #fbfdff 0%, #f6f9ff 100%);
  }
}

@layer utilities {
  .bg-card {
    background: linear-gradient(180deg, #f8fafc 0%, #fcfdff 100%);
  }
}

.header-glass {
  @apply sticky top-0 z-50 w-full flex justify-between items-center shadow-sm transition-all duration-300 backdrop-blur-md;
  @apply px-8 lg:px-16 py-4;
  background: linear-gradient(
    180deg,
    rgba(255, 255, 255, 0.6),
    rgba(255, 255, 255, 0.55)
  );
}

@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground;
    font-feature-settings: "rlig" 1, "calt" 1;
  }
}

/* React Datepicker Custom Overrides */
.rdp-button:hover:not([data-selected-single="true"]):not(.rdp-day_outside):not(.rdp-day_disabled) {
  background-color: #2F437F !important;
  color: white !important;
}

.rdp-button[data-selected-single="true"] {
  background-color: #4169E1 !important;
  color: white !important;
}

.rdp-day_outside,
.rdp-day_disabled {
  pointer-events: none !important;
  opacity: 0.4 !important;
}

.rdp-day_outside:hover,
.rdp-day_disabled:hover {
  background-color: transparent !important;
  color: var(--color-text-primary) !important;
  opacity: 0.4 !important;
}

.authenticated.dark .rdp-day_outside,
.authenticated.dark .rdp-day_disabled {
  opacity: 0.5 !important;
  color: var(--color-text-primary) !important;
}

.rdp-button[data-selected-single="true"]:hover {
  background-color: #4169E1 !important;
  color: white !important;
}

.rdp-button {
  border-radius: 9999px !important;
}

/* Form Placeholders */
input::placeholder,
textarea::placeholder {
  color: var(--color-muted);
  opacity: 1; 
}

/* Animations */
@keyframes slideInRight {
  from { transform: translateX(100%); opacity: 0; }
  to { transform: translateX(0); opacity: 1; }
}

@keyframes slideOutRight {
  from { transform: translateX(0); opacity: 1; }
  to { transform: translateX(100%); opacity: 0; }
}

.toast-enter {
  animation: slideInRight 0.3s ease-out forwards;
}

.toast-exit {
  animation: slideOutRight 0.3s ease-in forwards;
}

/* Print Styles */
@media print {
  aside, header, .export-panel, .add-subject-btn, button, .breadcrumb, nav {
    display: none !important;
  }
  .calendar-container {
    width: 100% !important;
    height: auto !important;
    border: none !important;
    overflow: visible !important;
  }
  * {
    color: black !important;
    background: white !important;
  }
  @page {
    margin: 0.5cm;
    size: landscape;
  }
  main {
    padding: 0 !important;
    margin: 0 !important;
  }
}

@layer utilities {
  @keyframes breathe {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.03); }
  }
  .animate-breathe {
    animation: breathe 3s ease-in-out infinite;
  }
}